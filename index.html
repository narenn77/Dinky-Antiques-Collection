<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dinky's Antiques Collection</title>
<style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; }
    header { display:flex; justify-content: space-between; align-items:center; padding:10px 20px; background:#444; color:#fff; }
    header a { color:#fff; text-decoration:none; }
    nav { padding:10px 20px; background:#eee; display:flex; gap:10px; flex-wrap:wrap; }
    section { padding:20px; }
    h2 { margin-top:40px; }
    .scroll-container { display:flex; overflow-x:auto; gap:15px; padding-bottom:10px; }
    .item { flex:0 0 auto; width:150px; cursor:pointer; text-align:center; }
    .item img { width:150px; height:120px; object-fit:cover; border:1px solid #ccc; border-radius:5px; }
    /* Popup styles */
    .popup-bg { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:1000; }
    .popup-content { background:#fff; padding:20px; max-width:90%; max-height:90%; overflow:auto; border-radius:10px; text-align:center; }
    .popup-content img { max-width:100%; margin-bottom:10px; }
    .close-btn { background:#444; color:#fff; border:none; padding:5px 10px; cursor:pointer; border-radius:5px; margin-bottom:10px; }
    @media(max-width:600px){
        .item img { width:120px; height:100px; }
    }
</style>
</head>
<body>

<header>
    <div><h1>My Stamp & Coin Collection</h1></div>
    <div><a href="mailto:dnaphx@gmail.com">Contact: dnaphx@gmail.com</a></div>
</header>

<nav>
    <a href="#stamps">Jump to Stamps</a>
    <a href="#coins">Jump to Coins</a>
    <a href="#notes">Jump to Currency Notes</a>
    <select id="yearFilter"><option value="">Filter by Year Range</option></select>
    <select id="countryFilter"><option value="">Filter by Country</option></select>
</nav>

<section id="stamps">
    <h2>Stamps</h2>
    <div class="scroll-container" id="stampsContainer"></div>
</section>

<section id="coins">
    <h2>Coins</h2>
    <div class="scroll-container" id="coinsContainer"></div>
</section>

<section id="notes">
    <h2>Currency Notes</h2>
    <div class="scroll-container" id="notesContainer"></div>
</section>

<!-- Popup -->
<div class="popup-bg" id="popup">
    <div class="popup-content" id="popupContent">
        <button class="close-btn" onclick="closePopup()">Close</button>
        <div id="popupImages"></div>
        <div id="popupDescription"></div>
    </div>
</div>

<script>
// Load your data.json
let items = [];
fetch('data.json')
    .then(res => res.json())
    .then(data => {
        items = data;
        setupFilters();
        displayItems(items);
    });

function displayItems(filteredItems){
    const stampsContainer = document.getElementById('stampsContainer');
    const coinsContainer = document.getElementById('coinsContainer');
    const notesContainer = document.getElementById('notesContainer');
    stampsContainer.innerHTML = '';
    coinsContainer.innerHTML = '';
    notesContainer.innerHTML = '';

    filteredItems.forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';
        const img = document.createElement('img');

        if(item.type === 'Stamp'){
            img.src = item.img;
            div.appendChild(img);
            div.onclick = ()=> openPopup([item.img], item.description);
            stampsContainer.appendChild(div);
        }
        if(item.type === 'Coin'){
            img.src = item.imgFront;
            div.appendChild(img);
            div.onclick = ()=> openPopup([item.imgFront, item.imgBack], item.description);
            coinsContainer.appendChild(div);
        }
        if(item.type === 'Currency Note'){
            img.src = item.imgFront;
            div.appendChild(img);
            div.onclick = ()=> openPopup([item.imgFront, item.imgBack], item.description);
            notesContainer.appendChild(div);
        }
    });
}

// Popup functions
function openPopup(images, description){
    document.getElementById('popupImages').innerHTML = images.map(src => `<img src="${src}">`).join('');
    document.getElementById('popupDescription').textContent = description;
    document.getElementById('popup').style.display = 'flex';
}
function closePopup(){
    document.getElementById('popup').style.display = 'none';
}

// Filters setup
function setupFilters(){
    // Year ranges 10-year
    const years = items.map(i => i.year);
    const minYear = Math.min(...years);
    const maxYear = Math.max(...years);
    const yearSelect = document.getElementById('yearFilter');
    for(let y = minYear - (minYear%10); y <= maxYear; y+=10){
        const opt = document.createElement('option');
        opt.value = `${y}-${y+9}`;
        opt.textContent = `${y}-${y+9}`;
        yearSelect.appendChild(opt);
    }

    // Countries alphabetical
    const countries = [...new Set(items.map(i=>i.country))].sort();
    const countrySelect = document.getElementById('countryFilter');
    countries.forEach(c=>{
        const opt = document.createElement('option');
        opt.value = c;
        opt.textContent = c;
        countrySelect.appendChild(opt);
    });

    // Event listeners
    yearSelect.addEventListener('change', applyFilters);
    countrySelect.addEventListener('change', applyFilters);
}

function applyFilters(){
    const yearValue = document.getElementById('yearFilter').value;
    const countryValue = document.getElementById('countryFilter').value;
    let filtered = items;

    if(yearValue){
        const [start,end] = yearValue.split('-').map(Number);
        filtered = filtered.filter(i => i.year >= start && i.year <= end);
    }
    if(countryValue){
        filtered = filtered.filter(i=> i.country === countryValue);
    }

    // Sort by year ascending
    filtered.sort((a,b)=> a.year - b.year);
    displayItems(filtered);
}
</script>

</body>
</html>
